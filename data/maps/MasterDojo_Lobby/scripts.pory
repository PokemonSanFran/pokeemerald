#ifdef RESTRICTED_SPARRING
const PLAYER = OBJ_EVENT_ID_PLAYER

const CHALLENGE_STATUS_UNKNOWN = 0
const CHALLENGE_STATUS_END = 255

const VAR_FACILITY_CHALLENGE_STATUS = VAR_TEMP_0
const VAR_NEED_TO_FACE_NORTH = VAR_TEMP_1

mapscripts MasterDojo_Lobby_MapScripts
{
    MAP_SCRIPT_ON_WARP_INTO_MAP_TABLE
    [
        VAR_NEED_TO_FACE_NORTH, 0:MasterDojo_Lobby_EventScript_PlayerFaceNorth
    ]

    MAP_SCRIPT_ON_FRAME_TABLE
    [
        VAR_FACILITY_CHALLENGE_STATUS, CHALLENGE_STATUS_UNKNOWN: RestrictedSparring_Entrance_EventScript_GetChallengeStatus
        VAR_FACILITY_CHALLENGE_STATUS, CHALLENGE_STATUS_SAVING: RestrictedSparring_Entrance_EventScript_QuitWithoutSaving
        VAR_FACILITY_CHALLENGE_STATUS, CHALLENGE_STATUS_PAUSED: RestrictedSparring_Entrance_EventScript_ResumeChallenge
        VAR_FACILITY_CHALLENGE_STATUS, CHALLENGE_STATUS_WON: RestrictedSparring_Entrance_EventScript_JudgeChallenge
        VAR_FACILITY_CHALLENGE_STATUS, CHALLENGE_STATUS_LOST: RestrictedSparring_Entrance_EventScript_JudgeChallenge
    ]
}

script MasterDojo_Lobby_EventScript_PlayerFaceNorth
{
    setvar(VAR_NEED_TO_FACE_NORTH, 1)
    turnobject(PLAYER, DIR_NORTH)
    end
}
#endif
