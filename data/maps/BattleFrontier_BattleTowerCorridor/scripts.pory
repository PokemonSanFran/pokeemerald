const ATTENDANT = 1

mapscripts BattleFrontier_BattleTowerCorridor_MapScripts{
    MAP_SCRIPT_ON_LOAD{
        if (var(VAR_0x8006) == 1){
            goto(BattleFrontier_BattleTowerCorridor_EventScript_OpenFarDoor)
        }
        setmetatile(12, 0, METATILE_BattleFrontier_CorridorOpenDoor_Top, FALSE)
        setmetatile(12, 1, METATILE_BattleFrontier_CorridorOpenDoor_Bottom, FALSE)
        end
    }
    MAP_SCRIPT_ON_FRAME_TABLE[
        VAR_TEMP_0, 0: BattleFrontier_BattleTowerCorridor_EventScript_EnterCorridor
    ]
}

script BattleFrontier_BattleTowerCorridor_EventScript_OpenFarDoor{
	setmetatile(15, 0, METATILE_BattleFrontier_CorridorOpenDoor_Top, FALSE)
	setmetatile(15, 1, METATILE_BattleFrontier_CorridorOpenDoor_Bottom, FALSE)
	end
}

script BattleFrontier_BattleTowerCorridor_EventScript_EnterCorridor{
    setvar(VAR_TEMP_0, 1)
    if (var(VAR_0x8006) == 1){
        applymovement(ATTENDANT, BattleFrontier_BattleTowerCorridor_Movement_AttendantWalkToFarDoor)
        applymovement(OBJ_EVENT_ID_PLAYER, BattleFrontier_BattleTowerCorridor_Movement_PlayerWalkToFarDoor)
    }else{
        applymovement(ATTENDANT, BattleFrontier_BattleTowerCorridor_Movement_AttendantWalkToDoor)
        applymovement(OBJ_EVENT_ID_PLAYER, BattleFrontier_BattleTowerCorridor_Movement_PlayerWalkToDoor)
    }
    waitmovement(0)
    goto(BattleFrontier_BattleTowerCorridor_EventScript_WarpToBattleRoom)
}

script BattleFrontier_BattleTowerCorridor_EventScript_WarpToBattleRoom{
	setvar(VAR_TEMP_0, 0)
	warp(MAP_BATTLE_FRONTIER_BATTLE_TOWER_BATTLE_ROOM, 4, 8)
	waitstate
	end
}

movement BattleFrontier_BattleTowerCorridor_Movement_PlayerWalkToFarDoor{
	walk_right * 7
	walk_up
	set_invisible
	step_end
}

movement BattleFrontier_BattleTowerCorridor_Movement_AttendantWalkToFarDoor{
	walk_right * 6
	walk_up
	set_invisible
	step_end
}

movement BattleFrontier_BattleTowerCorridor_Movement_PlayerWalkToDoor{
	walk_right * 4
	walk_up
	set_invisible
	step_end
}

movement BattleFrontier_BattleTowerCorridor_Movement_AttendantWalkToDoor{
	walk_right * 3
	walk_up
	set_invisible
	step_end
}
