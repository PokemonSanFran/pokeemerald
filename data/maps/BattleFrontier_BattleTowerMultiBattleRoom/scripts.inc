BattleFrontier_BattleTowerMultiBattleRoom_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, BattleFrontier_BattleTowerMultiBattleRoom_MapScripts_MAP_SCRIPT_ON_TRANSITION
	map_script MAP_SCRIPT_ON_WARP_INTO_MAP_TABLE, BattleFrontier_BattleTowerMultiBattleRoom_MapScripts_MAP_SCRIPT_ON_WARP_INTO_MAP_TABLE
	map_script MAP_SCRIPT_ON_FRAME_TABLE, BattleFrontier_BattleTowerMultiBattleRoom_MapScripts_MAP_SCRIPT_ON_FRAME_TABLE
	.byte 0

BattleFrontier_BattleTowerMultiBattleRoom_MapScripts_MAP_SCRIPT_ON_TRANSITION:
	call_if_eq VAR_FRONTIER_BATTLE_MODE, FRONTIER_MODE_MULTIS, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_SetObjGfx
	call_if_eq VAR_FRONTIER_BATTLE_MODE, FRONTIER_MODE_LINK_MULTIS, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_SetLinkPlayerGfx
	end

BattleFrontier_BattleTowerMultiBattleRoom_MapScripts_MAP_SCRIPT_ON_WARP_INTO_MAP_TABLE:
	map_script_2 VAR_TEMP_1, 0, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_HidePlayerObj
	.2byte 0

BattleFrontier_BattleTowerMultiBattleRoom_MapScripts_MAP_SCRIPT_ON_FRAME_TABLE:
	map_script_2 VAR_TEMP_0, 0, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_EnterRoom
	.2byte 0


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_SetObjGfx::
	tower_setpartnergfx
	checkplayergender
	goto_if_eq VAR_RESULT, FEMALE, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_SetPlayerGfxFemale
	setvar VAR_OBJ_GFX_ID_F, OBJ_EVENT_GFX_BRENDAN_NORMAL
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_SetPlayerGfxFemale::
	setvar VAR_OBJ_GFX_ID_F, OBJ_EVENT_GFX_MAY_NORMAL
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_SetLinkPlayerGfx::
	special SetBattleTowerLinkPlayerGfx
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_HidePlayerObj::
	hideobjectat OBJ_EVENT_ID_PLAYER, MAP_BATTLE_FRONTIER_BATTLE_TOWER_MULTI_BATTLE_ROOM
	end


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_EnterRoom::
	setvar VAR_TEMP_0, 1
	applymovement 5, BattleFrontier_BattleTowerMultiBattleRoom_Movement_PlayerEnterRoom
	applymovement 6, BattleFrontier_BattleTowerMultiBattleRoom_Movement_PartnerEnterRoom
	waitmovement 0
	frontier_get FRONTIER_DATA_BATTLE_NUM
	goto_if_eq VAR_RESULT, 0, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_OpponentsEnter
	applymovement 2, BattleFrontier_BattleTowerMultiBattleRoom_Movement_AttendantApproachPlayer
	applymovement 3, BattleFrontier_BattleTowerMultiBattleRoom_Movement_AttendantApproachPlayer
	waitmovement 0
	applymovement 5, BattleFrontier_BattleTowerMultiBattleRoom_Movement_FaceAttendant
	applymovement 6, BattleFrontier_BattleTowerMultiBattleRoom_Movement_FaceAttendant
	waitmovement 0
	frontier_set FRONTIER_DATA_RECORD_DISABLED, TRUE
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_OpponentsEnter::
	tower_setopponent
	addobject 1
	addobject 4
	applymovement 1, BattleFrontier_BattleTowerMultiBattleRoom_Movement_Opponent1Enter
	applymovement 4, BattleFrontier_BattleTowerMultiBattleRoom_Movement_Opponent2Enter
	waitmovement 0
	goto_if_eq VAR_FRONTIER_BATTLE_MODE, FRONTIER_MODE_LINK_MULTIS, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DoOpponentIntrosLink
	tower_getopponentintro 0
	delay 15
	applymovement 1, BattleFrontier_BattleTowerMultiBattleRoom_Movement_WalkInPlaceLeft
	waitmovement 0
	msgbox gStringVar4, MSGBOX_DEFAULT
	waitmessage
	tower_getopponentintro 1
	applymovement 4, BattleFrontier_BattleTowerMultiBattleRoom_Movement_WalkInPlaceLeft
	waitmovement 0
	msgbox gStringVar4, MSGBOX_DEFAULT
	waitmessage
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DoTowerBattle
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DoOpponentIntrosLink::
	tower_getopponentintro 0
	delay 15
	applymovement 1, BattleFrontier_BattleTowerMultiBattleRoom_Movement_WalkInPlaceLeft
	waitmovement 0
	messageautoscroll gStringVar4
	waitmessage
	delay 48
	tower_getopponentintro 1
	applymovement 4, BattleFrontier_BattleTowerMultiBattleRoom_Movement_WalkInPlaceLeft
	waitmovement 0
	messageautoscroll gStringVar4
	waitmessage
	delay 48
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DoTowerBattle
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DoTowerBattle::
	call BattleFrontier_BattleTowerBattleRoom_EventScript_DoTowerBattle
	switch VAR_RESULT
	case B_OUTCOME_WON, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DoTowerBattle_3
BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DoTowerBattle_1:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_WarpToLobbyLost
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DoTowerBattle_3:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DefeatedOpponents
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DoTowerBattle_1


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_WarpToLobbyLost::
	frontier_set FRONTIER_DATA_CHALLENGE_STATUS, CHALLENGE_STATUS_LOST
	tower_set TOWER_DATA_LVL_MODE
	setvar VAR_0x8004, FANCOUNTER_USED_BATTLE_TOWER
	special Script_TryGainNewFanFromCounter
	goto BattleFrontier_BattleTowerBattleRoom_EventScript_WarpToLobby
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DefeatedOpponents::
	call BattleFrontier_EventScript_IncrementWinStreak
	tower_setbattlewon
	switch VAR_RESULT
	case 7, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DefeatedOpponents_3
BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DefeatedOpponents_1:
	applymovement 4, BattleFrontier_BattleTowerMultiBattleRoom_Movement_Opponent2Exit
	applymovement 1, BattleFrontier_BattleTowerMultiBattleRoom_Movement_Opponent1Exit
	waitmovement 0
	removeobject 1
	removeobject 4
	applymovement 2, BattleFrontier_BattleTowerMultiBattleRoom_Movement_AttendantApproachPlayer
	applymovement 3, BattleFrontier_BattleTowerMultiBattleRoom_Movement_AttendantApproachPlayer
	waitmovement 0
	applymovement 5, BattleFrontier_BattleTowerMultiBattleRoom_Movement_FaceAttendant
	applymovement 6, BattleFrontier_BattleTowerMultiBattleRoom_Movement_FaceAttendant
	waitmovement 0
	goto_if_eq VAR_FRONTIER_BATTLE_MODE, FRONTIER_MODE_LINK_MULTIS, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_RetorePartyMsgLink
	msgbox BattleFrontier_BattleTowerBattleRoom_Text_RestoreMonsToFullHealth, MSGBOX_DEFAULT
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_RestoreParty
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DefeatedOpponents_3:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_WarpToLobbyWon
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_DefeatedOpponents_1


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_RetorePartyMsgLink::
	messageautoscroll BattleFrontier_BattleTowerBattleRoom_Text_RestoreMonsToFullHealth
	waitmessage
	delay 48
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_RestoreParty
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_RestoreParty::
	special LoadPlayerParty
	frontier_setpartyorder FRONTIER_MULTI_PARTY_SIZE
	call_if_eq VAR_FRONTIER_BATTLE_MODE, FRONTIER_MODE_LINK_MULTIS, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ReconnectLink
	playfanfare MUS_HEAL
	waitfanfare
	special HealPlayerParty
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents::
	frontier_get FRONTIER_DATA_BATTLE_NUM
	call BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ReadyForNextOpponentSet
	goto_if_eq VAR_FRONTIER_BATTLE_MODE, FRONTIER_MODE_LINK_MULTIS, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ContinueChallenge
	call BattleFrontier_EventScript_GetCantRecordBattle
	goto_if_eq VAR_RESULT, TRUE, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsNoRecord
	multichoice 19, 4, MULTI_GO_ON_RECORD_REST_RETIRE, TRUE
	switch VAR_RESULT
	case 0, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents_2
	case 1, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents_3
	case 2, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents_4
	case 3, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents_5
	case MULTI_B_PRESSED, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents_6
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents_2:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ContinueChallenge
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents_3:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattle
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents_4:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskPauseChallenge
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents_5:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallenge
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents_6:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsNoRecord::
	multichoice 20, 6, MULTI_GO_ON_REST_RETIRE, TRUE
	switch VAR_RESULT
	case 0, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsNoRecord_2
	case 1, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsNoRecord_3
	case 2, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsNoRecord_4
	case MULTI_B_PRESSED, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsNoRecord_5
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsNoRecord_2:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ContinueChallenge
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsNoRecord_3:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskPauseChallenge
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsNoRecord_4:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallenge
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsNoRecord_5:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattle::
	message BattleFrontier_BattleTowerBattleRoom_Text_RecordYourBattle
	waitmessage
	multichoicedefault 20, 8, MULTI_YESNO, 1, FALSE
	switch VAR_RESULT
	case 1, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattle_2
	case 0, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattle_3
	case MULTI_B_PRESSED, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattle_4
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattle_2:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattle_3:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_RecordBattle
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattle_4:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_RecordBattle::
	call BattleFrontier_EventScript_SaveBattle
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskPauseChallenge::
	msgbox BattleFrontier_BattleTowerBattleRoom_Text_SaveAndQuitGame, MSGBOX_YESNO
	switch VAR_RESULT
	case NO, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskPauseChallenge_2
	case YES, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskPauseChallenge_3
	case MULTI_B_PRESSED, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskPauseChallenge_4
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskPauseChallenge_2:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskPauseChallenge_3:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_PauseChallenge
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskPauseChallenge_4:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallenge::
	message BattleFrontier_BattleTowerBattleRoom_Text_CancelYourChallenge
	waitmessage
	multichoicedefault 20, 8, MULTI_YESNO, 1, FALSE
	switch VAR_RESULT
	case 1, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallenge_2
	case 0, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallenge_3
	case MULTI_B_PRESSED, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallenge_4
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallenge_2:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallenge_3:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_WarpToLobbyLost
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallenge_4:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ContinueChallenge::
	closemessage
	clearflag FLAG_TEMP_2
	applymovement 5, BattleFrontier_BattleTowerMultiBattleRoom_Movement_FaceBattle
	applymovement 6, BattleFrontier_BattleTowerMultiBattleRoom_Movement_FaceBattle
	waitmovement 0
	applymovement 2, BattleFrontier_BattleTowerMultiBattleRoom_Movement_AttendantReturnToPos
	applymovement 3, BattleFrontier_BattleTowerMultiBattleRoom_Movement_AttendantReturnToPos
	waitmovement 0
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_OpponentsEnter
	end


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_WarpToLobbyWon::
	frontier_set FRONTIER_DATA_CHALLENGE_STATUS, CHALLENGE_STATUS_WON
	tower_set TOWER_DATA_LVL_MODE
	setvar VAR_0x8004, FANCOUNTER_USED_BATTLE_TOWER
	special Script_TryGainNewFanFromCounter
	goto BattleFrontier_BattleTowerBattleRoom_EventScript_WarpToLobby
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_PauseChallenge::
	message BattleFrontier_BattleTowerBattleRoom_Text_SavingPleaseWait
	waitmessage
	tower_save CHALLENGE_STATUS_PAUSED
	playse SE_SAVE
	waitse
	fadescreen 1
	frontier_reset
	end


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ReadyForNextOpponentSet::
	goto_if_eq VAR_FRONTIER_BATTLE_MODE, FRONTIER_MODE_LINK_MULTIS, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ReadyForNextOpponentSetLink
	copyvar VAR_TEMP_E, VAR_RESULT
	addvar VAR_TEMP_E, 1
	buffernumberstring STR_VAR_3, VAR_TEMP_E
	message BattleFrontier_BattleTowerBattleRoom_Text_ReadyForXOpponent
	waitmessage
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ReadyForNextOpponentSetLink::
	copyvar VAR_TEMP_E, VAR_RESULT
	addvar VAR_TEMP_E, 1
	buffernumberstring STR_VAR_3, VAR_TEMP_E
	message BattleFrontier_BattleTowerBattleRoom_Text_ReadyForXOpponent
	waitmessage
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLink
	end


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_LinkDelayForMsg::
	waitmessage
	delay 48
	return


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLink::
	goto_if_set FLAG_TEMP_2, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLinkNoRecord
	multichoice 19, 6, MULTI_GO_ON_RECORD_RETIRE, TRUE
	switch VAR_RESULT
	case 0, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLink_2
	case 1, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLink_3
	case 2, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLink_4
	case MULTI_B_PRESSED, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLink_5
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLink_2:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ContinueChallengeLink
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLink_3:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattleLink
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLink_4:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallengeLink
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLink_5:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallengeLink
	end


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLinkNoRecord::
	multichoice 20, 8, MULTI_GO_ON_RETIRE, TRUE
	switch VAR_RESULT
	case 0, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLinkNoRecord_2
	case 1, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLinkNoRecord_3
	case MULTI_B_PRESSED, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLinkNoRecord_4
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLinkNoRecord_2:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ContinueChallengeLink
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLinkNoRecord_3:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallengeLink
	return

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponentsLinkNoRecord_4:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallengeLink
	end


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ContinueChallengeLink::
	setvar VAR_0x8004, BATTLE_TOWER_LINK_CONTINUE
	setvar VAR_0x8005, 0
	message gText_LinkStandby3
	waitmessage
	special LinkRetireStatusWithBattleTowerPartner
	waitstate
	goto_if_ne VAR_RESULT, BATTLE_TOWER_LINKSTAT_CONTINUE, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_WarpToLobbyLost
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_LinkDelayForMsg
	end


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattleLink::
	message BattleFrontier_BattleTowerBattleRoom_Text_RecordYourBattle
	waitmessage
	multichoicedefault 20, 8, MULTI_YESNO, 1, FALSE
	switch VAR_RESULT
	case 1, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattleLink_3
	case MULTI_B_PRESSED, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattleLink_4
BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattleLink_1:
	call BattleFrontier_EventScript_SaveBattle
	setflag FLAG_TEMP_2
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	end

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattleLink_3:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattleLink_1

BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattleLink_4:
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRecordBattleLink_1


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskRetireChallengeLink::
	message BattleFrontier_BattleTowerBattleRoom_Text_CancelYourChallenge
	waitmessage
	multichoicedefault 20, 8, MULTI_YESNO, 1, FALSE
	goto_if_eq VAR_RESULT, 0, BattleFrontier_BattleTowerMultiBattleRoom_EventScript_RetireChallengeLink
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_AskReadyForOpponents
	end


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_RetireChallengeLink::
	setvar VAR_0x8004, BATTLE_TOWER_LINK_RETIRE
	setvar VAR_0x8005, 0
	message gText_LinkStandby3
	waitmessage
	special LinkRetireStatusWithBattleTowerPartner
	waitstate
	goto BattleFrontier_BattleTowerMultiBattleRoom_EventScript_WarpToLobbyLost
	end


BattleFrontier_BattleTowerMultiBattleRoom_EventScript_ReconnectLink::
	special BattleTowerReconnectLink
	return


BattleFrontier_BattleTowerMultiBattleRoom_Movement_PlayerEnterRoom:
	walk_up
	walk_up
	walk_up
	walk_up
	face_right
	step_end

BattleFrontier_BattleTowerMultiBattleRoom_Movement_PartnerEnterRoom:
	walk_left
	walk_up
	walk_up
	walk_up
	face_right
	step_end

BattleFrontier_BattleTowerMultiBattleRoom_Movement_FaceAttendant:
	face_left
	step_end

BattleFrontier_BattleTowerMultiBattleRoom_Movement_FaceBattle:
	walk_in_place_faster_right
	step_end

BattleFrontier_BattleTowerMultiBattleRoom_Movement_Opponent1Enter:
	walk_down
	walk_down
	walk_down
	walk_down
	face_left
	step_end

BattleFrontier_BattleTowerMultiBattleRoom_Movement_Opponent2Enter:
	walk_right
	walk_down
	walk_down
	walk_down
	face_left
	step_end

BattleFrontier_BattleTowerMultiBattleRoom_Movement_Opponent2Exit:
	walk_up
	walk_up
	walk_up
	set_invisible
	step_end

BattleFrontier_BattleTowerMultiBattleRoom_Movement_Opponent1Exit:
	walk_up
	walk_up
	walk_up
	walk_up
	step_end

BattleFrontier_BattleTowerMultiBattleRoom_Movement_AttendantApproachPlayer:
	walk_right
	walk_right
	step_end

BattleFrontier_BattleTowerMultiBattleRoom_Movement_AttendantReturnToPos:
	walk_left
	walk_left
	walk_in_place_faster_right
	step_end

BattleFrontier_BattleTowerMultiBattleRoom_Movement_WalkInPlaceLeft:
	walk_in_place_left
	step_end

BattleFrontier_BattleTowerMultiBattleRoom_Text_ReadyForXOpponent::
	.string "You will be facing opponent no. {STR_VAR_3}.\nAre you ready?$"

gText_LinkStandby3::
	.string "Link standby…$"

gText_YourPartnerHasRetired::
	.string "Your partner has retired.\pYour BATTLE ROOM challenge\nwill be canceled.$"
